(()=>{"use strict";const e=(e,s)=>{let o=[],r=parseInt(e[0],10),t=parseInt(e[1],10);console.log(typeof r,`${r}`,"testing type of x "),console.log(typeof t,`${t}`,"testing type of y ");let a=s.squares[r][t];return console.log(a,"testing board values"),{knight:function(){if(r+1<=7&&t+2<=7){const e=r+1,c=t+2;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(r+2<=7&&t+1<=7){const e=r+2,c=t+1;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(t+2<=7&&r-1>=0){const e=r-1,c=t+2;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(t+1<=7&&r-2>=0){const e=r-2,c=t+1;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(r+1<=7&&t-2>=0){const e=r+1,c=t-2;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(r+2<=7&&t-1>=0){const e=r+2,c=t-1;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(r-2>=0&&t-1>=0){const e=r-2,c=t-1;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(r-1>=0&&t-2>=0){const e=r-1,c=t-2;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}},king:function(){if(a.start&&void 0!==s.squares[r+3][t]&&s.squares[r+3][t].start&&void 0===s.squares[r+1][t]&&void 0===s.squares[r+2][t]&&o.push([r+2,t]),a.start&&void 0!==s.squares[r-4][t]&&s.squares[r-4][t].start&&void 0===s.squares[r-1][t]&&void 0===s.squares[r-2][t]&&void 0===s.squares[r-3][t]&&o.push([r-2,t]),r+1<=7){const e=r+1,c=t;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(r+1<=7&&t+1<=7){const e=r+1,c=t+1;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(t-1>=0){const e=r,c=t-1;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(r-1>=0){const e=r-1,c=t;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(r-1>=0&&t+1<=7){const e=r-1,c=t+1;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(r-1>=0&&t-1>=0){const e=r-1,c=t-1;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(t+1<=7){const e=r,c=t+1;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}if(t-1>=0){const e=r,c=t-1;(void 0===s.squares[e][c]||void 0!==s.squares[e][c]&&s.squares[e][c].color!==a.color)&&o.push([e,c])}},rook:function(){let e=1;for(;r+e<=7;)void 0===s.squares[r+e][t]?(o.push([r+e,t]),e++):(a.color===s.squares[r+e][t].color||o.push([r+e,t]),e=8);for(e=1;t+e<=7;)void 0===s.squares[r][t+e]?(o.push([r,t+e]),e++):(a.color===s.squares[r][t+e].color||o.push([r,t+e]),e=8);for(e=1;r-e>=0;)void 0===s.squares[r-e][t]?(o.push([r-e,t]),e++):(a.color===s.squares[r-e][t].color||o.push([r-e,t]),e=8);for(e=1;t-e>=0;)void 0===s.squares[r][t-e]?(o.push([r,t-e]),e++):(a.color===s.squares[r][t-e].color||o.push([r,t-e]),e=8)},bishop:function(){let e=1;for(;r+e<=7&&t+e<=7;){let c=r+e,i=t+e;void 0===s.squares[c][i]?(e++,o.push([c,i])):(s.squares[c][i].color===a.color||o.push([i,c]),e=8)}for(e=1;r+e<=7&&t-e>=0;){let c=r+e,i=t-e;void 0===s.squares[c][i]?(e++,o.push([c,i])):(s.squares[c][i].color===a.color||o.push([i,c]),e=8)}for(e=1;r-e>=0&&t+e<=7;){let c=r-e,i=t+e;void 0===s.squares[c][i]?(e++,o.push([c,i])):(s.squares[c][i].color===a.color||o.push([i,c]),e=8)}for(e=1;r-e>=0&&t-e>=0;){let c=r-e,i=t-e;void 0===s.squares[c][i]?(o.push([c,i]),e++):(s.squares[c][i].color===a.color||o.push([i,c]),e=8)}},queen:function(){this.rook(),this.bishop()},pawn:function(){"white"===a.color?(console.log("I happened"),r+1<=7&&void 0!==s.squares[r+1][t]&&s.squares[r+1][t].enpasant&&o.push([r+1,t+1]),console.log("I happened 2"),r-1>=0&&void 0!==s.squares[r-1][t]&&s.squares[r-1][t].enpasant&&o.push([r-1,t+1]),console.log("I happened 3"),t+2<=7&&a.start&&void 0===s.squares[r][t+1]&&void 0===s.squares[r][t+2]&&o.push([r,t+2]),console.log("I happened 4"),t+1<=7&&void 0===s.squares[r][t+1]&&(o.push([r,t+1]),console.log("I happened 5")),r+1<=7&&t+1<=7&&void 0!==s.squares[r+1][t+1]&&"white"!==s.squares[r+1][t+1].color&&o.push([r+1,t+1]),console.log("I happened 6"),r-1>=0&&t+1<=7&&void 0!==s.squares[r-1][t+1]&&"white"!==s.squares[r-1][t+1].color&&o.push([r-1,t+1]),console.log("Sucess")):(console.log("I happened"),r+1<=7&&void 0!==s.squares[r+1][t]&&s.squares[r+1][t].enpasant&&o.push([r+1,t-1]),console.log("I happened 2"),r-1>=0&&void 0!==s.squares[r-1][t]&&s.squares[r-1][t].enpasant&&o.push([r-1,t-1]),console.log("I happened 3"),t-2>=0&&a.start&&void 0===s.squares[r][t-1]&&void 0===s.squares[r][t-2]&&o.push([r,t-2]),console.log("I happened 4"),t-1>=0&&void 0===s.squares[r][t-1]&&(o.push([r,t-1]),console.log("I happened 5")),r+1<=7&&t-1>=0&&void 0!==s.squares[r+1][t-1]&&"black"!==s.squares[r+1][t-1].color&&o.push([r+1,t-1]),console.log("I happened 6"),r-1>=0&&t-1>=0&&void 0!==s.squares[r-1][t-1]&&"black"!==s.squares[r-1][t-1].color&&o.push([r-1,t-1]),console.log("Sucess"))}}[a.type](),o},s=()=>{let s=(()=>{let e=[new Array(8),new Array(8),new Array(8),new Array(8),new Array(8),new Array(8),new Array(8),new Array(8)];return{playerFactory:e=>{const s={};return s.color=e,s.human=!1,s.king=!0,s},pieceFactory:(e,s)=>{const o={};return o.color=s,o.type=e,o.img=`../public/images/pieces/${s} ${e}.png`,o},squares:e,setPieceTo:(s,o,r,t)=>{t&&(s.start=!0),e[o][r]=s}}})(),o=s.squares;const r=o=>{c();const r=e(o.target.dataset.coords,s);t(r)},t=e=>{e.forEach((e=>{let s=document.createElement("div");s.classList.add("grey");let o=document.querySelector(`[data-coords="${e[0]}${e[1]}"]`);o.classList.add("possibleMove"),o.appendChild(s),o.addEventListener("click",a)}))},a=e=>{c()},c=()=>{document.querySelectorAll(".grey").forEach((e=>{let s=e.parentElement;s.classList.remove("possibleMove"),s.removeEventListener("click",a),s.removeChild(e)}))};return{placePieces:()=>{for(let e=0;e<=7;e++)s.setPieceTo(s.pieceFactory("pawn","white"),e,1,!0);for(let e=0;e<=7;e++)s.setPieceTo(s.pieceFactory("pawn","black"),e,6,!0);s.setPieceTo(s.pieceFactory("rook","white"),0,0,!0),s.setPieceTo(s.pieceFactory("rook","white"),7,0,!0),s.setPieceTo(s.pieceFactory("rook","black"),0,7,!0),s.setPieceTo(s.pieceFactory("rook","black"),7,7,!0),s.setPieceTo(s.pieceFactory("knight","white"),1,0),s.setPieceTo(s.pieceFactory("knight","white"),6,0),s.setPieceTo(s.pieceFactory("knight","black"),1,7),s.setPieceTo(s.pieceFactory("knight","black"),6,7),s.setPieceTo(s.pieceFactory("bishop","white"),2,0),s.setPieceTo(s.pieceFactory("bishop","white"),5,0),s.setPieceTo(s.pieceFactory("bishop","black"),2,7),s.setPieceTo(s.pieceFactory("bishop","black"),5,7),s.setPieceTo(s.pieceFactory("queen","white"),3,0),s.setPieceTo(s.pieceFactory("queen","black"),3,7),s.setPieceTo(s.pieceFactory("king","white"),4,0,!0),s.setPieceTo(s.pieceFactory("king","black"),4,7,!0)},renderBoard:()=>{let e=!1;o.forEach(((s,o)=>{let r=document.createElement("tr");r.setAttribute("class","tableRow");for(let t=0;t<=7;t++){let a=document.createElement("td");a.setAttribute("class","boardSquare"),a.setAttribute("data-coords",`${o}${t}`);let c=s[t];if(void 0!==c){let e=document.createElement("img");e.setAttribute("class","pieceImg"),e.setAttribute("src",c.img),e.setAttribute("alt",`${c.color} ${c.type}`),a.setAttribute(`data-${c.color}`,""),a.appendChild(e)}!0===e?(e=!1,a.classList.add("green")):e=!0,r.appendChild(a)}e=!0!==e,document.getElementById("boardSquares").appendChild(r)}))},chooseSide:e=>{let o=s.playerFactory("white"),r=s.playerFactory("black");return"1"===e?o.human=!0:r.human=!0,{player1:o,player2:r}},playerCanClick:e=>{document.querySelectorAll(`[data-${e}]`).forEach((e=>{e.addEventListener("click",r),e.classList.add("active")}))},game:s}};function o(e){document.querySelector(".pages .page.active").classList.remove("active"),document.querySelector(`.pages .page[data-page="${e}"]`).classList.add("active")}function r(e){let o=s();o.placePieces(),o.renderBoard(),console.log("testing gameboard 0 0 "),document.getElementById("sidechoice").classList.add("hide"),o.chooseSide(e.target.attributes.value.value).player1.human?o.playerCanClick("white"):o.playerCanClick("black")}window.onload=()=>{const e=document.querySelectorAll("[data-switcher]");for(let s=0;s<e.length;s++){const r=e[s],t=r.dataset.tab;r.addEventListener("click",(()=>{document.querySelector(".tabs .tab.active").classList.remove("active"),r.parentNode.classList.add("active"),o(t)}))}},document.getElementById("whitecolor").addEventListener("click",(e=>{r(e)})),document.getElementById("blackcolor").addEventListener("click",(e=>{r(e)}))})();